### NAT Gateway

VPC λ³΄μ•μ„ μ„ν•΄ EC2λ‚ ECS, RDSμ™€ κ°™μ€ μΈμ¤ν„΄μ¤λ¥Ό private subnetμ— μ„μΉν•λ„λ΅ ν•λ©΄ μ΄μ— λ€ν• μΈν„°λ„· νΈλν”½μ„ μ„ν•΄ NAT Gatewayκ°€ ν•„μ”ν•λ‹¤.

- κΈ°λ³Έμ μΈ subnet λ¶„λ¦¬μ— λ”°λ¥Έ κµ¬μ„±
![image](https://user-images.githubusercontent.com/72699541/200501343-e2f2a1ba-8b30-4c9c-bca9-78050a19262e.png)

- Internet Gateway

Internet Gateway λ” VPC μΈμ¤ν„΄μ¤κ°€ μΈν„°λ„·μ— μ—°κ²°λκΈ° μ„ν•΄ λ°λ“μ‹ ν•„μ”ν•λ‹¤. private subnet κ³Ό public subnet μ μ°¨μ΄λ¥Ό κ²°μ •μ§“λ” μ”μ†μ΄κΈ°λ„ ν•λ‹¤. private subnet κ³Ό λ‹¬λ¦¬ public subnet μ€ λ¨λ“  νΈλν”½(0.0.0.0/0)μ— λ€ν•΄ Internet Gateway λ΅ νΈλν”½μ΄ λΌμ°ν…λλ‹¤.


> Internet Gateway λ” κ·Έ μμ²΄λ΅λ„ NATμ΄λ©°, public IPλ¥Ό κ°–κ³ μλ‹¤.
> 


- NAT Gateway

NAT Gatewayλ” NAT(λ„¤νΈμ›ν¬ μ£Όμ† λ³€ν™) μ„λΉ„μ¤μ΄λ‹¤. private subnet μ μΈμ¤ν„΄μ¤κ°€ VPC μ™Έλ¶€μ     μ„λΉ„μ¤μ— μ—°κ²°ν•  μ μμ§€λ§ μ™Έλ¶€ μ„λΉ„μ¤μ—μ„ μ΄λ¬ν• μΈμ¤ν„΄μ¤μ™€μ μ—°κ²°μ„ μ‹μ‘ν•  μ μ—†λ„λ΅ NAT Gateway λ¥Ό μ‚¬μ©ν•  μ μλ‹¤. λ³΄ν†µ, public subnet μ— μ„μΉν•μ—¬, private subnet μ— μΈν„°λ„· νΈλν”½μ„ μ „λ‹¬ν•λ” μ©λ„λ΅ μ‚¬μ©λλ‹¤. 

> κ³ κ°€μ©μ„±μ„ μ„ν•΄ 2κ° μ΄μƒμ AZμ—μ„ λ¦¬μ†μ¤κ°€ μ΄μ©ν•λ‹¤λ©΄ NAT Gatewayλ¥Ό AZ λ‹Ή 1κ°μ”© λ§λ“¤μ–΄μ£Όμ–΄μ•Ό ν•λ‹¤.
> 

-----

### λΉ„μ© λ¬Έμ 

VPC μ— NAT Gateway λ¥Ό μƒμ„±ν•λ” κ²½μ°, ν”„λ΅λΉ„μ €λ‹λκ³  μ‚¬μ© κ°€λ¥ν• NATμ— λ€ν•΄ NAT Gateway μ‹κ°„λ‹Ή μ”κΈμ΄ λ¶€κ³Όλλ‹¤. λ°μ΄ν„° μ²λ¦¬ μ”κΈμ€ νΈλν”½ μ†μ¤λ‚ λ€μƒκ³Ό κ΄€κ³„μ—†μ΄ NAT Gateway λ¥Ό ν†µν•΄ μ²λ¦¬λ κ° κΈ°κ°€λ°”μ΄νΈμ— μ μ©λλ‹¤.

- [NAT Gatway](https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/vpc-nat-gateway.html) λ¥Ό ν†µν•΄ μ „μ†΅λλ” λ°μ΄ν„° μ”κΈ,Β `NAT-Gateway-Bytes`

[λ…Όλ¦¬μ μΌλ΅ κ²©λ¦¬λ κ°€μƒ λ„¤νΈμ›ν¬ - Amazon VPC μ”κΈ - Amazon Web Services](https://aws.amazon.com/ko/vpc/pricing/)

μ„λ²„ μΈμ¤ν„΄μ¤κ°€ AWS μƒμ—μ„ κµ¬λ™λλ” κ²½μ°, μ„λ²„ μ™Έλ¶€λ΅ νΈλν”½μ΄ μ „λ‹¬λκΈ° λ³΄λ‹¤λ” AWS λ‚΄μ— μ„μΉν• λ°μ΄ν„°λ² μ΄μ¤λ‚, S3μ™€ κ°™μ€ μ„λ²„λ¦¬μ¤ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•κ² λλ” κ²½μ°κ°€ λ§μ€λ°, μ΄ κ²½μ°μ—λ” κµ³μ΄ NAT κ²μ΄νΈμ›¨μ΄ λ€μ‹ μ— VPC μ—”λ“ν¬μΈνΈλΌλ” κΈ°λ¥μ„ μ‚¬μ©ν•μ—¬, μƒλ€μ μΌλ΅ λ°μƒν•λ” μ”κΈμ„ μ μ•½ν•  μ μλ‹¤.

---

### **VPC Endpoint**

VPC Endpoint λ” ****private subnet μ— μ„μΉν• μΈμ¤ν„΄μ¤κ°€ AWS μ„λΉ„μ¤μ— μ—°κ²°ν•  λ•μ— NAT Gateway λ¥Ό μ‚¬μ©ν•λ” λ€μ‹  μ‚¬μ©ν•λ ¤λ” AWS μ„λΉ„μ¤μ™€μ ν†µμ‹ μ„ λ‹΄λ‹Ήν•λ” μ ‘μ μ„ λ§λ“¤μ–΄μ„ μ—°κ²°ν•λ„λ΅ ν•λ” VPC κµ¬μ„± μ”μ†μ΄λ‹¤.

> ν•λ‚μ VPC Endpoint μ—λ” ν•λ‚μ μ„λΉ„μ¤λ§ μ§€μ •ν•  μ μλ‹¤.
> 

- EC2 κ°€ S3λ΅μ μ ‘κ·Όμ΄ ν•„μ”ν• κ²½μ°, NAT Gateway λ¥Ό λ¶™μ—¬ μ—°κ²°ν•κ² ν•λ” λ€μ‹ , S3 VPC Endpoint λ¥Ό ν•λ‚ λ§λ“¤μ–΄ ν†µμ‹ μ΄ κ°€λ¥ν•λ„λ΅ ν•  μ μλ‹¤.
![image](https://user-images.githubusercontent.com/72699541/200501483-e68fb115-3ed2-4c48-92c4-b8547bb13b03.png)

---

### VPC Endpoint μ„λΉ„μ¤ μ ν•

EndPoint μ„λΉ„μ¤μ— ν•„μ”ν• VPC EndPoint μ ν•μ„ μƒμ„±ν•΄μ•Ό ν•λ‹¤.

- `Interface`
    
    νΈλν”½μ„ λ¶„μ‚°ν•κΈ° μ„ν•΄ Network Load Balancerλ¥Ό μ‚¬μ©ν•λ” μ—”λ“ν¬μΈνΈ μ„λΉ„μ¤λ΅ νΈλν”½μ„ λ³΄λ‚΄λ”Β *μΈν„°νμ΄μ¤ μ—”λ“ν¬μΈνΈ λ¥Ό μƒμ„±ν•©λ‹λ‹¤.*Β μ—”λ“ν¬μΈνΈ μ„λΉ„μ¤λ΅ ν–¥ν•λ” νΈλν”½μ€ DNSλ¥Ό μ‚¬μ©ν•μ—¬ ν™•μΈλ©λ‹λ‹¤.
    
    AWS μ„λΉ„μ¤μ μ§„μ…μ  μ—­ν• μ„ ν•λ” ν”„λΌμ΄λΉ— IPκ°€ μλ” νƒ„λ ¥μ  λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤(ENI).Β ν•΄λ‹Ή ν”„λΌμ΄λΉ— IPλ¥Ό μ‚¬μ©ν•μ—¬ EC2/ECSμ—μ„ AWS μ„λΉ„μ¤μ— μ—°κ²°ν•©λ‹λ‹¤.Β μΈν„°νμ΄μ¤ μ—”λ“ν¬μΈνΈ λΉ„μ©μ€ μ²μ 1PBμ— λ€ν•΄ μ‹κ°„λ‹Ή $0.01 λ° GBλ‹Ή $0.01μ…λ‹λ‹¤.Β 
    
    [AWS PrivateLink μ”κΈ - Amazon Web Services](https://aws.amazon.com/ko/privatelink/pricing/)
    
- `GatewayLoadBalancer`
    
    *κ²μ΄νΈμ›¨μ΄ λ΅λ“ λ°Έλ°μ„ μ—”λ“ν¬μΈνΈ*Β λ¥Ό μƒμ„± ν•μ—¬ ν”„λΌμ΄λΉ— IP μ£Όμ†λ¥Ό μ‚¬μ©ν•μ—¬ κ°€μƒ μ–΄ν”λΌμ΄μ–Έμ¤ μ§‘ν•©μ— νΈλν”½μ„ λ³΄λƒ…λ‹λ‹¤.Β λΌμ°ν… ν…μ΄λΈ”μ„ μ‚¬μ©ν•μ—¬ VPCμ—μ„ κ²μ΄νΈμ›¨μ΄ λ΅λ“ λ°Έλ°μ„ μ—”λ“ν¬μΈνΈλ΅ νΈλν”½μ„ λΌμ°ν…ν•©λ‹λ‹¤.Β κ²μ΄νΈμ›¨μ΄ λ΅λ“ λ°Έλ°μ„λ” νΈλν”½μ„ κ°€μƒ μ–΄ν”λΌμ΄μ–Έμ¤λ΅ λ¶„μ‚°ν•κ³  μμ”μ— λ”°λΌ ν™•μ¥ν•  μ μμµλ‹λ‹¤.
    
- `Gateway`
    
    ν”„λΌμ΄λΉ— IP μ£Όμ†λ¥Ό μ‚¬μ©ν•μ—¬ **Amazon S3 λλ” DynamoDB**λ΅ νΈλν”½μ„ μ „μ†΅ ν•λ”Β *κ²μ΄νΈμ›¨μ΄ μ—”λ“ν¬μΈνΈ λ¥Ό μƒμ„±ν•©λ‹λ‹¤.*Β λΌμ°ν… ν…μ΄λΈ”μ„ μ‚¬μ©ν•μ—¬ VPCμ—μ„ κ²μ΄νΈμ›¨μ΄ μ—”λ“ν¬μΈνΈλ΅ νΈλν”½μ„ λΌμ°ν…ν•©λ‹λ‹¤.Β κ²μ΄νΈμ›¨μ΄ μ—”λ“ν¬μΈνΈλ” AWS PrivateLinkλ¥Ό ν™μ„±ν™”ν•μ§€ μ•μµλ‹λ‹¤.
    

---

### κ²°λ΅ 

<aside>
π’΅ AWSμ—μ„ μ„λΉ„μ¤ μ΄μ μ‹ Private subnet μ— μ„μΉν• μΈμ¤ν„΄μ¤κ°€ VPC μ™Έλ¶€μ AWS μ„λΉ„μ¤λ¥Ό μ΄μ©ν•κ³ μ ν•  λ• NAT Gateway κ°€ μ•„λ‹ VPC Endpoint λ¥Ό μ‚¬μ©ν•λ©΄ λΉ„μ©μ„ μ¤„μΌ μ μλ‹¤.

</aside>
