본 프로젝트에서는 현재 S3, EFS Storage 서비스를 사용중이다.

S3는 현재 동시에 같은 파일을 수정하지 못하도록 막기 위해 DynamoDB를 사용하여 Locking의 기능을 하면서, terraform의 상태를 저장하기 위해 Backup을 위한 bucket을 생성하였다.
또한, 누가 접근해서 작업했는지 알 수 있도록 기록을 남기는 log용 bucket도 생성하였다. 

EFS는 각 가용영역마다 private subnet에 속해있는 EC2(worker node)에서 데이터를 저장하기 위해 확장 사용 가능한 파일 스토리지 서비스를 사용하고 있다.

그렇다면, 본 글에서는 각 Storage 서비스에 대해 설명을 한 후, 왜 이 서비스를 이용했는지에 대해 설명해보려한다.

다음과 같은 순서로 설명하겠다.
```
1. S3는 무엇인가?
2. EFS는 무엇인가?
3. EBS는 무엇인가?
4. 왜 이 storage 서비스를 선택하였는가?
```
![image](https://user-images.githubusercontent.com/88362207/202939003-45f76c65-7f1e-45b3-be38-ade383e7480e.png)

### S3(Amazon Simple Storage Service) - 데이터 저장 및 백업에 적합
S3는 계층 구조가 없는 평평한 환경에 객체로 데이터를 저장한다. 저장소의 각 개체(파일)에는 해당 바이트 시퀀스(0bite ~ 5TB까지)가 있는 헤더가 포함되어 있다.
이 저장소 유형의 개체는 고유 식별자(키)와 연결되므로 어디에서나 웹 요청을 통해 액세스할 수 있다. 예를 들어 자체 데이터 센터의 승인된 노드 혹은 외부 사용자는 버킷의 모든 객체에 액세스 할 수있다.
(S3는 구조화 되지 않은 데이터를 위한 스토리지 서비스이다. 예를 들면 S3는 널리 사용되는 데이터 백업 대상이다.

### EFS
EBS는 VM용 시스템 드라이브를 구성하는데 적합하고 S3는 스토리지에 적합하지만, 확장 가능한 스토리지와 상대적으로 빠른 출력이 필요한 워크로드가 높은 애플리케이션을 실행하려면 EFS를 사용하면 된

EFS는 자동으로 확장이 가능하다. 즉, 워크로드가 갑자기 증가해도 실행 중인 애플리케이션에 아무런 문제가 없고 그에 따라 스토리지가 확장된다,
워크로드가 감소하면 스토리지 양이 자동적으로 축소하므로 사용하지 않은 스토리지에 대해 비용을 지불하지 않아도 된다,

EFS를 다양한 AWS 서비스에 탑재하고 다양한 가상 머신에서 액세스할 수 있다. EFS는 서버, 공유 볼륨, 빅 데이터 분석 등 생각할 수 있는 모든 확장 가능한 워크로드 실행에 유용하다.



### EBS(Elastic Block Storage) - 가상 머신용 드라이브
AWS EC2(Elastic Compute Cloud)에서 사용하도록 설계된 사용하기 쉬운 고성능 블록 스토리지 서비스이다.
(S3와 같은 독립형 스토리지 서비스가 아니므로 EC2와 결합하여 사용해야 한다.)

컴퓨터나 노트북에 연결된 하드 드라이브와 유사하지만 가상화된 환경에있다. 물리적 시스템의 로컬 디스크 드라이브처럼 Amazon EC2 인스턴스에 연결된 전용 볼륨에 데이터를 저장하도록 설계되어 있다.
EBS는 볼륨을 다른 EC2에 연결하거나 대기 모드로 유지하는 것만 허용한다. 볼륨이 EBS에 구성되면 쉽게 확장할 수 없기 때문에, 더 많은 저장 공간이 필요한 경우 더 큰 새 볼륨을 구입하여 구성하고 마운트해야 한다.


가용 영역 내에서 복제를 통해 재해복구한다.
  볼륨의 특정 시점 스냅샷을 S3에 저장할 수 있다.
  마지막 스냅샷 이후 변경된 블록만 저장한다.
  비동기적 생성(수정된 블록이 S3로 모두 이동할 때까지 스냅샷 상태는 pending이다)
  사용 중인 볼륨도 스냅샷 생성할 수 있다. (단, 루트 디바이스 역할의 EBS 볼륨은 인스턴스 중지해야한다.)

### Amazon S3 대 EFS 대 EBS 비교

|S3|EBS|EFS|
|:---:|:---:|:---:|
|공개적으로 액세스할 수 있음|지정된 EC2 머신 파일 시스템 인터페이스 를 통해서만 액세스 가능|지정된 EC2 머신 파일 시스템 인터페이스 를 통해서만 액세스 가능|
|개체 스토리지|블록 스토리지|개체 스토리지|
|확장 가능하며, EBS 및 EFS보다 느림|불가능 S3 및 EFS보다 빠름|S3보다 빠르고 EBS보다 느림|
|백업 및 기타 정적 데이터 저장에 적합|EC2 드라이브를 의미|애플리케이션 및 공유 가능한 워크로드에 적합|
