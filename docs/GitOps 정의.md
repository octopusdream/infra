### GitOps

GitOps는 버전 관리, 협업, 규정 준수, CI/CD 도구 등 애플리케이션 개발에 사용되는 DevOps 모범 사례를 가져와 인프라 자동화에 적용 하는 운영 프레임워크이다.

최근, 인프라에 대한 요구로 인해 인프라 자동화를 구현하는 것이 점점 더 중요해지고 있다.

최신 인프라는 지속적 배포에 필요한 클라우드 리소스를 효과적으로 관리할 수 있도록 탄력적이어야 한다.

최신 애플리케이션은 속도와 규모를 염두에 두고 개발되고 있고, mature DevOps 문화를 가진 조직은 하루에 수백 번 코드를 배포할 수 있다.

테스트 및 배포를 자동화하는 버전 제어, 코드 검토 및 CI/CD 파이프라인과 같은 개발 모범 사례를 통해 이를 달성할 수 있다.

GitOps는 인프라 프로비저닝 프로세스를 자동화하는 데 사용된다.

GitOps를 채택한 운영 팀은 코드로 저장된 구성 파일(코드로서의 인프라)을 사용한다.

애플리케이션 소스 코드가 빌드될 때마다 동일한 애플리케이션 바이너리를 생성하는 것처럼 GitOps 구성 파일은 배포될 때마다 동일한 인프라 환경을 생성한다.

GitOps를 시작하는 방법에 있어서, 모든 팀 구성원이 구성 및 코드를 공유할 수 있도록 전용 GitOps 리포지토리를 사용하고, 코드 변경 배포를 자동화하고, 변경 사항이 발생하면 팀에 알리도록 경고 설정이 포함된다.

GitOps에는 **IaC + MR + CI/CD** 세 가지 핵심 구성 요소가 필요하다.

### IaC

GitOps는 인프라 정의를 위한 단일 정보 소스로 Git 리포지토리를 사용한다.

Git은 코드 관리 변경 사항을 추적하는 오픈 소스 버전 제어 시스템이고 Git 레포지토리는 시간 경과에 따라 프로젝트의 파일에 대한 모든 변경 사항을 추적하는 프로젝트의 .git 폴더이다.

IaC(Infrastructure as Code) 는 모든 인프라 구성을 코드로 저장하는 방식이다.

### MR

GitOps는 모든 인프라 업데이트에 대한 change mechanism으로 merge requests (MR)을 사용한다.

MR은 팀이 검토 및 의견을 통해 협업할 수 있는 곳이며 공식 승인이 이루어지는 곳이다.

merge는 main branch에 커밋되고 audit log 로 제공한다.

### **CI/CD**

GitOps는 CI(지속적 통합) 및 CI/CD(지속적 전달)가 포함된  Git workflow를 사용하여 인프라 업데이트를 자동화한다. 

CI 는 기존 코드와 새로개발한 코드를 출시하기 위해 빌드, 테스트, 통합을 자동으로 하는 방법이다.

CD 는 코드가 실 서비스에 배포될 준비가 되어있는지 추가테스트 진행하고 자동으로 서비스 배포, 어떤 경우에는 수동으로 실서비스에 배포할 것인지 결정할 수 있다.

새 코드가 merge되면 CI/CD 파이프라인이 환경의 변경 사항을 적용한다.

GitOps 자동화로 overwrite를 통해, 환경이 Git에 정의된 원하는 상태로 수렴된다.
